<header></header>
<ion-content>
  <ion-grid *ngIf="form">
    <ion-row class="ion-justify-content-center">

      <ion-col size="12" size-xl="3">
        <form [formGroup]="form" (ngSubmit)="submit()">
          <ion-card>
            <ion-item lines="full" color="primary">
              <ion-icon slot="start" size="large" name="grid-outline"></ion-icon>
              <ion-label>{{ app.name }}</ion-label>
            </ion-item>
            <ion-card-content>
              <div style="display: flex; align-items: center;justify-content: center;">
                <img *ngIf="app.image" [src]="app.image" />
              </div>
              <div>
                <ion-button style="width: 100%;" disabled>App kaufen</ion-button>
              </div>
              <div>
                <ion-button style="width: 100%;" [disabled]="app.instanceIds.length == 0"
                  [routerLink]="['../../update', app.appId]">App bearbeiten</ion-button>
              </div>
              <div>
                <ion-button style="width: 100%;"
                  [disabled]="(app.cardinality != 'MULTIPLE' && app.instanceIds.length != 0) || app.status.name != 'INSTALLABLE'"
                  [routerLink]="['../../install', app.appId]">App anlegen
                  <!-- TODO later rename to 'aktivieren' -->
                </ion-button>
              </div>
              <div *ngIf="app.instanceIds.length == 0 && app.status.name != 'INSTALLABLE'">
                <div *ngIf="app.status.errorCompatibleMessages.length != 0 ">
                  <small>errorCompatibleMessages:</small><br />
                  <small *ngFor="let message of app.status.errorCompatibleMessages"> - {{ message }}</small><br />
                </div>
                <div *ngIf="app.status.errorInstallableMessages.length != 0 ">
                  <small>errorInstallableMessages:</small><br />
                  <small *ngFor="let message of app.status.errorInstallableMessages"> - {{ message }}</small><br />
                </div>
              </div>
            </ion-card-content>

          </ion-card>
        </form>
      </ion-col>
      <ion-col size="12" size-xl="7">
        <!-- TODO App Info -->
        <iframe src="https://fenecon.de/fems-2-2/fems-app-heizstab/" width="100%" height="400%" name="appInfo"
          title="App-Info"></iframe>
      </ion-col>

    </ion-row>
  </ion-grid>
</ion-content>