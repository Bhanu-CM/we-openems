<oe-chart [title]="'General.storageSystem' | translate" [showPhases]="showPhases" [showTotal]="showTotal"
  (setShowTotal)="setShowTotal($event)" (setShowPhases)="setShowPhases($event)" *ngIf="isInitialized"
  [period]="service.historyPeriod.value" [isPopoverNeeded]="true">

  <!-- SoC Chart -->
  <ion-card-content class="underline">
    <storageSocChart [chartTitle]="'General.soc' | translate" [showPhases]="showPhases" [showTotal]="showTotal">
    </storageSocChart>
  </ion-card-content>

  <ng-container *ngIf="showTotal">
    <ion-card-content>
      <storageTotalChart [chartTitle]="'General.TOTAL' | translate" [showPhases]="showPhases">
      </storageTotalChart>
      <!-- Info Text -->
      <ion-row class="ion-justify-content-center">
        <ion-item class="ion-text-center" lines="none">
          <ion-icon color="primary" size="large" slot="start" name="alert-outline"></ion-icon>
          <ion-label class="ion-text-wrap">
            <ion-row class="ion-text-center" translate>
              <small translate>
                Edge.Index.Widgets.InfoStorageForCharge
              </small>
            </ion-row>
            <ion-row size="6" class="ion-text-center">
              <small translate>
                Edge.Index.Widgets.InfoStorageForDischarge
              </small>
            </ion-row>
          </ion-label>
        </ion-item>
      </ion-row>
    </ion-card-content>
  </ng-container>

  <ng-container *ngIf="!showTotal">
    <ng-container *ngIf="essComponents?.length === 1">
      <ion-card-content class="underline">
        <storageSingleChart [chartTitle]="'General.TOTAL' | translate" [showPhases]="showPhases">
        </storageSingleChart>
      </ion-card-content>
      <!-- Info Text -->
      <ion-card-content class="underline">
        <ion-row class="ion-justify-content-center">
          <ion-item class="ion-text-center" lines="none">
            <ion-icon color="primary" size="large" slot="start" name="alert-outline"></ion-icon>
            <ion-label class="ion-text-wrap">
              <ion-row class="ion-text-center" translate>
                <small translate>
                  Edge.Index.Widgets.InfoStorageForCharge
                </small>
              </ion-row>
              <ion-row size="6" class="ion-text-center">
                <small translate>
                  Edge.Index.Widgets.InfoStorageForDischarge
                </small>
              </ion-row>
            </ion-label>
          </ion-item>
        </ion-row>
      </ion-card-content>
    </ng-container>
  </ng-container>

  <ng-container *ngIf="essComponents?.length > 1">
    <ion-card-content class="underline">
      <storageSingleChart [chartTitle]="'General.TOTAL' | translate" [showPhases]="showPhases">
      </storageSingleChart>
    </ion-card-content>
    <ng-container *ngFor="let component of essComponents">
      <ion-card-content class="underline">
        <storageEssChart [chartTitle]="component.alias" [componentId]="component.id" [showPhases]="showPhases">
        </storageEssChart>
      </ion-card-content>
    </ng-container>
    <!-- Info Text -->
    <ion-card-content class="underline">
      <ion-row class="ion-justify-content-center">
        <ion-item class="ion-text-center" lines="none">
          <ion-icon color="primary" size="large" slot="start" name="alert-outline"></ion-icon>
          <ion-label class="ion-text-wrap">
            <ion-row class="ion-text-center" translate>
              <small translate>
                Edge.Index.Widgets.InfoStorageForCharge
              </small>
            </ion-row>
            <ion-row size="6" class="ion-text-center">
              <small translate>
                Edge.Index.Widgets.InfoStorageForDischarge
              </small>
            </ion-row>
          </ion-label>
        </ion-item>
      </ion-row>
    </ion-card-content>
  </ng-container>

  <ng-container *ngIf="essComponents?.length !== 1">
    <ng-container *ngFor="let component of chargerComponents">
      <ion-card-content [class.underline]="!isLastElement(component, chargerComponents)">
        <storageChargerChart [title]="component.alias" [componentId]="component.id">
        </storageChargerChart>
      </ion-card-content>
    </ng-container>
  </ng-container>

</oe-chart>