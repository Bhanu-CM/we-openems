<ng-container *ngIf="controller && service.currentEdge | async as edge">
    <ng-container *ngIf="edge.currentData | async as currentData">
        <ion-card button (click)="presentModal()">

            <ion-item lines="full" color="light">
                <ion-icon slot="start" size="large" color="primary" name="flame"></ion-icon>
                <ion-label>{{ controller.alias }}</ion-label>
            </ion-item>
            <ion-card-content>
                <table class="full_width">
                    <tr>
                        <td style="width: 65%" translate>
                            General.Mode
                        </td>
                        <td style="width: 35%" class="align_right">
                            {{controller.properties['mode']}}
                        </td>
                    </tr>
                    <tr>
                        <td style="width:65%" translate>General.State</td>
                        <td style="width:35%" class="align_right" translate>
                            <ion-icon *ngIf="currentData.channel[outputChannel] == null" name="help"></ion-icon>
                            <ng-container *ngIf="currentData.channel[outputChannel] == 1">
                                General.Active
                            </ng-container>
                            <ng-container *ngIf="currentData.channel[outputChannel] == 0">
                                General.Inactive
                            </ng-container>
                        </td>
                    </tr>
                </table>
                <div style="padding-top: 5px;"></div>
                <table class="full_width">
                    <tr>
                        <td style="width: 100%">
                            <svg width="100%" height="20">
                                <rect width="100%" rx="5" ry="5" height="20" style="fill:#f4f4f4" />
                                <rect attr.x="{{ controller.properties['lowThreshold'] }}%" y="2" rx="5" ry="5"
                                    attr.width="{{ thresholdEnd }}%" height="16" style="fill:#2d8fab" />
                                <text attr.x="{{controller.properties['lowThreshold'] - 7}}%" y="58%"
                                    dominant-baseline="middle" text-anchor="middle"
                                    style="font-weight: 500">{{ controller.properties['lowThreshold'] + " %" }}</text>
                                <text attr.x="{{controller.properties['highThreshold'] + 7}}%" y="58%"
                                    dominant-baseline="middle" text-anchor="middle"
                                    style="font-weight: 500">{{ controller.properties['highThreshold'] + " %" }}</text>
                            </svg>
                        </td>
                    </tr>
                </table>
            </ion-card-content>
        </ion-card>
    </ng-container>
</ng-container>