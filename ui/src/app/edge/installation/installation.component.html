<header></header>
<ion-content>
    <ion-grid>

        <ion-row class="ion-justify-content-center">
            <ion-progress-bar [value]="progressValue"
                style="transform: scaleY(2);margin-bottom: 0.5%; margin-top: 0.5%; border-radius: 50px;">
            </ion-progress-bar>
            <ion-item lines="none">
                <ion-title>{{progressText}}</ion-title>
            </ion-item>
        </ion-row>

        <ng-container *ngIf="websocket.status === 'online'; else spinner">
            <ng-container [ngSwitch]="displayedView">

                <pre-installation *ngSwitchCase="view.PreInstallation" (edgeChange)="edge=$event"
                    (nextViewEvent)="displayNextView($event)">
                </pre-installation>

                <pre-installation-update *ngSwitchCase="view.PreInstallationUpdate"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)" [edge]="edge">
                </pre-installation-update>

                <configuration-system *ngSwitchCase="view.ConfigurationSystem" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </configuration-system>

                <configuration-sub-system *ngSwitchCase="view.ConfigurationSubSystem" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </configuration-sub-system>

                <configuration-system-variant *ngSwitchCase="view.ConfigurationSystemVariant" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </configuration-system-variant>

                <protocol-installer *ngSwitchCase="view.ProtocolInstaller" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </protocol-installer>

                <protocol-customer *ngSwitchCase="view.ProtocolCustomer" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </protocol-customer>

                <protocol-system *ngSwitchCase="view.ProtocolSystem" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </protocol-system>

                <configuration-emergency-reserve *ngSwitchCase="view.ConfigurationEmergencyReserve" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </configuration-emergency-reserve>

                <configuration-energy-flow-direction-meter *ngSwitchCase="view.ConfigurationEnergyFlowMeter" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </configuration-energy-flow-direction-meter>

                <configuration-line-side-meter-fuse *ngSwitchCase="view.ConfigurationLineSideMeterFuse" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </configuration-line-side-meter-fuse>

                <configuration-commercial-modbusbridge *ngSwitchCase="view.ConfigurationCommercialModbuBridge"
                    [ibn]="ibn" (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </configuration-commercial-modbusbridge>

                <configuration-mppt-selection *ngSwitchCase="view.ConfigurationMpptSelection" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </configuration-mppt-selection>

                <protocol-pv *ngSwitchCase="view.ProtocolPv" [ibn]="ibn" (previousViewEvent)="displayPreviousView()"
                    (nextViewEvent)="displayNextView($event)">
                </protocol-pv>

                <protocol-feed-in-limitation *ngSwitchCase="view.ProtocolFeedInLimitation" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </protocol-feed-in-limitation>

                <!-- Configuration and Protocol -->

                <configuration-summary *ngSwitchCase="view.ConfigurationSummary" [edge]="edge" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView()">
                </configuration-summary>

                <configuration-execute *ngSwitchCase="view.ConfigurationExecute" [edge]="edge" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView()">
                </configuration-execute>

                <protocol-serial-numbers *ngSwitchCase="view.ProtocolSerialNumbers" [edge]="edge" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView($event)">
                </protocol-serial-numbers>

                <completion *ngSwitchCase="view.Completion" [edge]="edge" [ibn]="ibn"
                    (previousViewEvent)="displayPreviousView()" (nextViewEvent)="displayNextView()">
                </completion>

            </ng-container>
        </ng-container>

        <ng-template #spinner>
            <ngx-spinner [name]="spinnerId"></ngx-spinner>
        </ng-template>

    </ion-grid>
</ion-content>
