package io.openems.edge.timeofusetariff.entsoe;

import static org.junit.Assert.assertFalse;
import static org.junit.Assert.assertTrue;

import java.io.IOException;

import org.junit.Ignore;
import org.junit.Test;

import io.openems.common.exceptions.OpenemsError.OpenemsNamedException;
import io.openems.edge.common.currency.Currency;

public class ExchangeRateApiTest {
	
	private static final String EXCHANGE_DATA = "{\n"
			+ "\"success\": true,\n"
			+ "\"base\": \"EUR\",\n"
			+ "\"date\": \"2023-07-24\",\n"
			+ "\"rates\": {\n"
			+ "\"AED\": 4.083409,\n"
			+ "\"AFN\": 95.203885,\n"
			+ "\"ALL\": 100.955251,\n"
			+ "\"AMD\": 432.377222,\n"
			+ "\"ANG\": 2.00259,\n"
			+ "\"AOA\": 918.778961,\n"
			+ "\"ARS\": 298.697752,\n"
			+ "\"AUD\": 1.651218,\n"
			+ "\"AWG\": 2.003466,\n"
			+ "\"AZN\": 1.890136,\n"
			+ "\"BAM\": 1.953145,\n"
			+ "\"BBD\": 2.223345,\n"
			+ "\"BDT\": 120.586719,\n"
			+ "\"BGN\": 1.953979,\n"
			+ "\"BHD\": 0.418898,\n"
			+ "\"BIF\": 3145.089913,\n"
			+ "\"BMD\": 1.11291,\n"
			+ "\"BND\": 1.477507,\n"
			+ "\"BOB\": 7.677482,\n"
			+ "\"BRL\": 5.312471,\n"
			+ "\"BSD\": 1.112521,\n"
			+ "\"BTC\": 0.000037,\n"
			+ "\"BTN\": 91.091466,\n"
			+ "\"BWP\": 14.618309,\n"
			+ "\"BYN\": 2.804583,\n"
			+ "\"BZD\": 2.239344,\n"
			+ "\"CAD\": 1.469717,\n"
			+ "\"CDF\": 2756.233722,\n"
			+ "\"CHF\": 0.96343,\n"
			+ "\"CLF\": 0.033239,\n"
			+ "\"CLP\": 907.642573,\n"
			+ "\"CNH\": 7.999695,\n"
			+ "\"CNY\": 7.996629,\n"
			+ "\"COP\": 4424.597438,\n"
			+ "\"CRC\": 595.871673,\n"
			+ "\"CUC\": 1.112533,\n"
			+ "\"CUP\": 28.624803,\n"
			+ "\"CVE\": 110.101152,\n"
			+ "\"CZK\": 24.018341,\n"
			+ "\"DJF\": 197.805497,\n"
			+ "\"DKK\": 7.446058,\n"
			+ "\"DOP\": 62.354298,\n"
			+ "\"DZD\": 149.782102,\n"
			+ "\"EGP\": 34.250999,\n"
			+ "\"ERN\": 16.675045,\n"
			+ "\"ETB\": 61.186276,\n"
			+ "\"EUR\": 1,\n"
			+ "\"FJD\": 2.466294,\n"
			+ "\"FKP\": 0.863468,\n"
			+ "\"GBP\": 0.86372,\n"
			+ "\"GEL\": 2.868411,\n"
			+ "\"GGP\": 0.863794,\n"
			+ "\"GHS\": 12.888427,\n"
			+ "\"GIP\": 0.864212,\n"
			+ "\"GMD\": 66.356165,\n"
			+ "\"GNF\": 9556.367239,\n"
			+ "\"GTQ\": 8.722648,\n"
			+ "\"GYD\": 232.625421,\n"
			+ "\"HKD\": 8.690213,\n"
			+ "\"HNL\": 27.354468,\n"
			+ "\"HRK\": 7.530486,\n"
			+ "\"HTG\": 151.687614,\n"
			+ "\"HUF\": 379.234306,\n"
			+ "\"IDR\": 16699.073705,\n"
			+ "\"ILS\": 4.026696,\n"
			+ "\"IMP\": 0.864168,\n"
			+ "\"INR\": 91.124393,\n"
			+ "\"IQD\": 1456.187686,\n"
			+ "\"IRR\": 46699.377014,\n"
			+ "\"ISK\": 146.216182,\n"
			+ "\"JEP\": 0.863718,\n"
			+ "\"JMD\": 171.45343,\n"
			+ "\"JOD\": 0.789061,\n"
			+ "\"JPY\": 157.232974,\n"
			+ "\"KES\": 157.988099,\n"
			+ "\"KGS\": 97.680423,\n"
			+ "\"KHR\": 4588.755627,\n"
			+ "\"KMF\": 492.572188,\n"
			+ "\"KPW\": 1000.485181,\n"
			+ "\"KRW\": 1424.639558,\n"
			+ "\"KWD\": 0.342156,\n"
			+ "\"KYD\": 0.927141,\n"
			+ "\"KZT\": 495.498053,\n"
			+ "\"LAK\": 21217.844772,\n"
			+ "\"LBP\": 16675.943499,\n"
			+ "\"LKR\": 364.901196,\n"
			+ "\"LRD\": 205.933361,\n"
			+ "\"LSL\": 20.023877,\n"
			+ "\"LYD\": 5.262548,\n"
			+ "\"MAD\": 10.765587,\n"
			+ "\"MDL\": 19.231847,\n"
			+ "\"MGA\": 4923.895352,\n"
			+ "\"MKD\": 61.432255,\n"
			+ "\"MMK\": 2333.03677,\n"
			+ "\"MNT\": 3911.893647,\n"
			+ "\"MOP\": 8.951275,\n"
			+ "\"MRU\": 38.013659,\n"
			+ "\"MUR\": 50.758404,\n"
			+ "\"MVR\": 17.064246,\n"
			+ "\"MWK\": 1170.314043,\n"
			+ "\"MXN\": 18.886283,\n"
			+ "\"MYR\": 5.075542,\n"
			+ "\"MZN\": 70.868602,\n"
			+ "\"NAD\": 19.976991,\n"
			+ "\"NGN\": 880.960008,\n"
			+ "\"NIO\": 40.643549,\n"
			+ "\"NOK\": 11.195761,\n"
			+ "\"NPR\": 145.777404,\n"
			+ "\"NZD\": 1.801523,\n"
			+ "\"OMR\": 0.42859,\n"
			+ "\"PAB\": 1.112509,\n"
			+ "\"PEN\": 3.98693,\n"
			+ "\"PGK\": 4.02331,\n"
			+ "\"PHP\": 60.767256,\n"
			+ "\"PKR\": 318.56528,\n"
			+ "\"PLN\": 4.460479,\n"
			+ "\"PYG\": 8082.233385,\n"
			+ "\"QAR\": 4.051879,\n"
			+ "\"RON\": 4.93425,\n"
			+ "\"RSD\": 117.206982,\n"
			+ "\"RUB\": 101.116135,\n"
			+ "\"RWF\": 1300.127368,\n"
			+ "\"SAR\": 4.170544,\n"
			+ "\"SBD\": 9.288389,\n"
			+ "\"SCR\": 14.985735,\n"
			+ "\"SDG\": 668.657232,\n"
			+ "\"SEK\": 11.553347,\n"
			+ "\"SGD\": 1.479788,\n"
			+ "\"SHP\": 0.863472,\n"
			+ "\"SLL\": 19637.280787,\n"
			+ "\"SOS\": 632.688782,\n"
			+ "\"SRD\": 42.722066,\n"
			+ "\"SSP\": 144.804499,\n"
			+ "\"STD\": 25372.268235,\n"
			+ "\"STN\": 24.470982,\n"
			+ "\"SVC\": 9.727935,\n"
			+ "\"SYP\": 2793.052605,\n"
			+ "\"SZL\": 20.003394,\n"
			+ "\"THB\": 38.341309,\n"
			+ "\"TJS\": 12.170235,\n"
			+ "\"TMT\": 3.891181,\n"
			+ "\"TND\": 3.411579,\n"
			+ "\"TOP\": 2.604569,\n"
			+ "\"TRY\": 29.962976,\n"
			+ "\"TTD\": 7.544979,\n"
			+ "\"TWD\": 34.876985,\n"
			+ "\"TZS\": 2716.276713,\n"
			+ "\"UAH\": 40.828967,\n"
			+ "\"UGX\": 4045.157318,\n"
			+ "\"USD\": 1.112576,\n"
			+ "\"UYU\": 42.188114,\n"
			+ "\"UZS\": 12906.061037,\n"
			+ "\"VES\": 32.294958,\n"
			+ "\"VND\": 26298.838308,\n"
			+ "\"VUV\": 132.263292,\n"
			+ "\"WST\": 3.029704,\n"
			+ "\"XAF\": 655.421747,\n"
			+ "\"XAG\": 0.04519,\n"
			+ "\"XAU\": 0.001442,\n"
			+ "\"XCD\": 3.004786,\n"
			+ "\"XDR\": 0.820903,\n"
			+ "\"XOF\": 655.421697,\n"
			+ "\"XPD\": 0.001221,\n"
			+ "\"XPF\": 119.235182,\n"
			+ "\"XPT\": 0.001139,\n"
			+ "\"YER\": 278.302358,\n"
			+ "\"ZAR\": 19.993867,\n"
			+ "\"ZMW\": 21.636944,\n"
			+ "\"ZWL\": 357.951203\n"
			+ "}\n"
			+ "}"
			;

	@Test
	@Ignore
	public void testExchangeRateApi() throws IOException {
		ExchangeRateApi.getExchangeRate();
	}
	
	@Test
	public void testExchangeRateParser() throws OpenemsNamedException {
		
		var currency = Currency.EUR;
		var response = Utils.exchangeRateParser(EXCHANGE_DATA, currency);

		assertTrue(response == 1.0);
		
		currency = Currency.SEK;
		response = Utils.exchangeRateParser(EXCHANGE_DATA, currency);
		
		assertFalse(response == 1.0);
	}
}
