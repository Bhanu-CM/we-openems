package io.openems.edge.app.pvinverter;

import java.util.List;

import org.osgi.service.component.ComponentContext;

import com.google.common.collect.Lists;

import io.openems.common.types.EdgeConfig;
import io.openems.common.types.EdgeConfig.Component;
import io.openems.common.utils.JsonUtils;
import io.openems.edge.common.component.ComponentManager;
import io.openems.edge.core.appmanager.AbstractOpenemsApp;
import io.openems.edge.core.appmanager.OpenemsAppCategory;

public abstract class AbstractPvInverter<PROPERTY extends Enum<PROPERTY>> extends AbstractOpenemsApp<PROPERTY> {

	protected AbstractPvInverter(ComponentManager componentManager, ComponentContext componentContext) {
		super(componentManager, componentContext);
	}

	@Override
	public OpenemsAppCategory[] getCategorys() {
		return new OpenemsAppCategory[] { OpenemsAppCategory.PV_INVERTER };
	}

	protected final List<Component> getComponents(String factoryId, String pvInverter0, String modbus0, String alias,
			String ip, int port) {

		return Lists.newArrayList(//
				new EdgeConfig.Component(pvInverter0, alias, factoryId, //
						JsonUtils.buildJsonObject() //
								.addProperty("modbus.id", modbus0) //
								.addProperty("port", port) //
								.build()), //
				new EdgeConfig.Component(modbus0, alias, "Bridge.Modbus.Tcp", JsonUtils.buildJsonObject() //
						.addProperty("ip", ip) //
						.build())//
		);
	}

	protected final Component getComponentWithFactoryId(List<Component> components, String factoryId) {
		for (Component component : components) {
			if (component.getFactoryId().equals(factoryId)) {
				return component;
			}
		}
		return null;
	}

	@Override
	public String getImage() {
		return "data:image/png;base64,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";
	}

}
